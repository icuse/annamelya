import{a as n}from"./chunk-O2MEU7K7.js";import{C as s,U as o,Y as h,ba as l,n as i,r as c}from"./chunk-AQ6B44A5.js";var S=(()=>{class a{http;apiUrl="https://restcountries.com/v3.1";cacheStore={byCapital:{term:"",countries:[]},byCountries:{term:"",countries:[]},byRegion:{region:"",countries:[]},byFlag:{term:"",countries:[]}};constructor(t){this.http=t,this.loadFromLocalStorage()}saveToLocalStorage(){localStorage.setItem("cacheStore",JSON.stringify(this.cacheStore))}loadFromLocalStorage(){localStorage.getItem("cacheStore")&&(this.cacheStore=JSON.parse(localStorage.getItem("cacheStore")))}getcountriesRequest(t){return this.http.get(t).pipe(s(e=>i([])))}searchCountryByAlphaCode(t){let e=`${this.apiUrl}/alpha/${t}`;return this.http.get(e).pipe(c(r=>r.length>0?r[0]:null),s(()=>i(null)))}searchCapital(t){let e=`${this.apiUrl}/capital/${t}`;return this.getcountriesRequest(e).pipe(o(r=>this.cacheStore.byCapital={term:t,countries:r}),o(()=>this.saveToLocalStorage()))}getAllCountries(){let t=`${this.apiUrl}/all`;return this.http.get(t).pipe(s(e=>i([])))}searchCountry(t){let e=`${this.apiUrl}/name/${t}`;return this.getcountriesRequest(e).pipe(o(r=>this.cacheStore.byCountries={term:t,countries:r}),o(()=>this.saveToLocalStorage()))}searchRegion(t){let e=`${this.apiUrl}/region/${t}`;return this.http.get(e).pipe(o(r=>this.cacheStore.byRegion={region:t,countries:r}),o(()=>this.saveToLocalStorage()))}searchFlag(t){let e=`${this.apiUrl}/region/${t}`;return this.http.get(e).pipe(o(r=>this.cacheStore.byFlag={term:t,countries:r}),o(()=>this.saveToLocalStorage()))}static \u0275fac=function(e){return new(e||a)(l(n))};static \u0275prov=h({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();export{S as a};
